(function(b,x,z,y,D,E,F,p,u){function B(a){return a&&typeof a===x&&!(typeof a.length===z&&!a.propertyIsEnumerable(y))&&a||null}function r(a){return a&&typeof a===x&&typeof a.length===z&&!a.propertyIsEnumerable(y)&&a||null}function v(a){return a&&"function"===typeof a&&a||null}function C(a){return"[object String]"===D.apply(a)&&a||null}function s(a){return v(a)&&a.prototype&&a===a.prototype.constructor&&a||null}function w(a,d,e){if(r(d))for(var A=d.length;0<=--A;)w(a,d[A],e);else{e=e||{constructor:1,
$super:1,prototype:1,$superp:1};var A=s(a),b=s(d),c=a.prototype,n,q;if(B(d))for(n in d){q=n;var m=d[n],h=a,l=A,k=c;e&&e.hasOwnProperty(q)||(h[q]=m,l&&(k[q]=m))}if(b)for(n in q=d.prototype,q){var m=n,h=q[n],l=a,k=A,G=c;e&&e.hasOwnProperty(m)||(l[m]=h,k&&(G[m]=h))}A&&b&&w(c,d.prototype,e)}}function t(a,d){d||(a=(d=a,0));var e,b,p,c,n,q,m=0,h,l={constructor:1,$singleton:1,$statics:1,prototype:1,$super:1,$superp:1,main:1,toString:0};n=t.overload;var k=t.plugins;d=("function"===typeof d?d():d)||{};e=d.hasOwnProperty("constructor")?
d.constructor:0;b=d.$singleton;p=d.$statics;for(c in k)l[c]=1;e=b?{}:e?n?n("constructor",e):e:function(){};n=b?e:e.prototype;for(q=(a=!a||r(a)?a:[a])&&a.length;m<q;){h=a[m++];for(c in h)l[c]||(n[c]=h[c],b||(e[c]=h[c]));for(c in h.prototype)l[c]||(n[c]=h.prototype[c])}for(c in d)l[c]||(n[c]=d[c]);for(c in p)e[c]=n[c]=p[c];b||(h=a&&a[0]||a,e.$super=h,e.$superp=h&&h.prototype?h.prototype:h);for(c in k)k[c](e,a,d);v(d.main)&&d.main.call(e,e);return e}t.plugins={};u={version:E,Class:t,extend:w,isMap:B,
isArray:r,isFunction:v,isString:C,isClass:s,mapOrNil:B,arrayOrNil:r,functionOrNil:v,stringOrNil:C,classOrNil:s};"undefined"!==typeof module&&module.exports?module.exports=u:(p=b.Class,b.Class=t,b.jsface=u,u.noConflict=function(){b.Class=p})})(this,"object","number","length",Object.prototype.toString,"2.1.2");
(function(b){b=b.jsface||require("./jsface");var x=b.isFunction,z=[],y=0;b.Class.plugins.$ready=function E(b,p,u,B){for(var r=u.$ready,v=p?p.length:0,C=v,s=v&&p[0].$super,w,t,a;v--;)for(t=0;t<y&&(a=z[t],w=p[v],w===a[0]&&(a[1].call(w,b,p,u),C--),C);t++);s&&E(b,[s],u,!0);!B&&x(r)&&(r.call(b,b,p,u),z.push([b,r]),y++)}})(this);
Class(function(){function b(l){for(var k={},a=l&&l.split("|"),d=a&&a.length||0,g,f,c;d--;)if(g=a[d].split(":"),f=g.length,0<f&&3>f)for(1===g.length&&g.unshift(F),f=g[0].split(","),c=f.length;c--;)k[f[c]]=g[1];else console.log(s,"unrecognized action",l);return k}function x(l,k){var G=k?d(l.target):d(this),c=k||l.type,g=y(G),f;f=G.closest(v);var b=f.length&&f.attr(r),b=b&&m.instanceRefs[b];!b&&f.length&&(b=D(f));f=b&&{parent:f,instance:b};if(g&&f&&(b=f.instance,c=g.actions[c])){c=["on",c.charAt(0).toUpperCase(),
c.slice(1)].join("");if(g=b&&a(b[c]))return g.call(b,l,G,f.parent);console.log(s,c,"not yet implemented")}}function z(l){var a,c;for(a in l.actions)if(C[a])l.element.on(a,x);for(c in l.children)z(l.children[c])}function y(a){var k=0,c,e;if(!a||!a.length)return k;if(c=a.attr(B)){k=(k=a.attr(u))&&k.replace(/'/g,'"');try{k=k&&H(k)}catch(g){}k={element:a,componentId:c,config:k,actions:b(a.attr(p))};a=a.children(":not([data-com])[data-act]");if(a=a.length&&a||0){c=a.length;for(e=[];c--;)e.push(y(d(a[c])));
k.children=e}}else(c=a.attr(p))&&(k={element:a,actions:b(c)});return k}function D(a){var c=y(a),d=m.instanceRefs,b,g,f,e;if(c)if(b=c.componentId,g=c.instanceId,f=m[b]){e=f.type;b=c.config;switch(e){case "shared":if(!(g=d[g]))a:{g=m.instanceRefs;for(var h in g)if(e=g[h],e instanceof f){g={instanceId:h,instance:e};break a}g={instanceId:q++,instance:new f}}f=g;g=f.instanceId;f=d[g]=f.instance;break;default:g=g||q++,f=d[g]||new f,d[g]=f}f.init(a,b);a.attr(r,g);z(c)}else console.log(s,"Component not found",
b),Kanji.notify("com:not-found",b,a);return d[g]}function E(){var a=m.instanceRefs,c=+new Date,b,h;for(b in a)if("0"!==b&&(h=d(["[",r,"=",b,"]"].join("")),h.length||delete a[b],+new Date-c>t))break;e(E,w)}var F="click",p="data-act",u="data-cfg",B="data-com",r="data-instance",v="[data-com]",C={mouseenter:1,mouseout:1,mousemove:1,mouseleave:1,mouseover:1,hover:1},s="[ERROR] Kanji:",w=3E3,t=250,a=jsface.functionOrNil,d=jQuery,e=setTimeout,A=[].slice,H="object"===typeof JSON&&JSON.parse||d.parseJSON,
c=0,n=[],q=1,m,h;return{$statics:{notify:function(){var a=A.call(arguments),c=a.shift(),b=m.instanceRefs,d,g,f,e;for(d in b)for(e in g=b[d],f=g.listeners,f)if(e===c){f[e].apply(g,a);break}}},init:function(a,c){},listeners:{},$ready:function(a,b,e){var h,g,f;if(this!==a)if(b=e.id){if(!m[b]){m[b]=a;h=['[data-com="',b,'"][data-lazy="false"]'].join("");f=a.$superp;for(b=a.$super;f;){f=f.listeners;for(g in f)e.listeners[g]||(e.listeners[g]=f[g]);f=b.$superp;b=b.$super}e.type&&(a.type=e.type);c?d(h).each(function(){D(d(this))}):
n.push(h)}}else console.log(s,"componentId not defined on api",e)},main:function(a){Kanji=a;m={instanceRefs:{0:{listeners:{"com:init":D}}}};d.fn.ready(function(){var a=d(document),b=n.length,l=0,g,f,m;for(c=1;l<b;)if(g=d(n[l++]),f=g.length,m=0,f)for(;m<f;)D(d(g[m++]));a.on("touchend","[data-act]",function(a){h=!0;return x(a,F)}).on(F,"[data-act]",function(a){if(!h)return x(a,F);h=!1});a.on("keydown keyup",function(a){return x(a,a.type)});e(E,w)})}}});