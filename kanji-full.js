/**
 * Kanji 感じ - web declarative component framework
 *
 * This file includes minimized version of jsface, jsface.ready and kanji
 *
 * @author Tan Nhu, http://lnkd.in/tnhu
 * @licence MIT
 */
(function(h,u,v,w,z,A,x,l){function y(a){return a&&typeof a===u&&!(typeof a.length===v&&!a.propertyIsEnumerable(w))}function q(a){return a&&typeof a===u&&typeof a.length===v&&!a.propertyIsEnumerable(w)}function r(a){return a&&"function"===typeof a}function s(a){return r(a)&&a.prototype&&a===a.prototype.constructor}function t(a,b,d){function m(b,f){d&&d.hasOwnProperty(b)||(a[b]=f,c&&(g[b]=f))}if(q(b))for(var f=b.length;0<=--f;)t(a,b[f],d);else{d=d||{constructor:1,$super:1,prototype:1,$superb:1};var c=
s(a),f=s(b),g=a.prototype,k,n;if(y(b))for(k in b)m(k,b[k]);if(f)for(k in n=b.prototype,n)m(k,n[k]);c&&f&&t(g,b.prototype,d)}}function p(a,b){b||(a=(b=a,0));var d,m,f,c,g,k,n=0,e,h={constructor:1,$singleton:1,$statics:1,prototype:1,$super:1,$superp:1,main:1};g=p.overload;var l=p.plugins;b=("function"===typeof b?b():b)||{};d=b.hasOwnProperty("constructor")?b.constructor:0;m=b.$singleton;f=b.$statics;for(c in l)h[c]=1;d=m?{}:d?g?g("constructor",d):d:function(){};g=m?d:d.prototype;for(k=(a=!a||q(a)?a:
[a])&&a.length;n<k;){e=a[n++];for(c in e)h[c]||(g[c]=e[c],m||(d[c]=e[c]));for(c in e.prototype)h[c]||(g[c]=e.prototype[c])}for(c in b)h[c]||(g[c]=b[c]);for(c in f)d[c]=g[c]=f[c];m||(e=a&&a[0]||a,d.$super=e,d.$superp=e&&e.prototype?e.prototype:e);for(c in l)l[c](d,a,b);r(b.main)&&b.main.call(d,d);return d}p.plugins={};l={Class:p,extend:t,isMap:y,isArray:q,isFunction:r,isString:function(a){return"[object String]"===z.apply(a)},isClass:s};"undefined"!==typeof module&&module.exports?module.exports=l:
(x=h.Class,h.Class=p,h.jsface=l,l.noConflict=function(){h.Class=x})})(this,"object","number","length",Object.prototype.toString);(function(a){a=a.jsface||require("./jsface");var p=a.isFunction,k=[],l=0;a.Class.plugins.$ready=function q(c,b,a,r){for(var f=a.$ready,d=b?b.length:0,m=d,n=d&&b[0].$super,g,e,h;d--;)for(e=0;e<l&&(h=k[e],g=b[d],g===h[0]&&(h[1].call(g,c,b,a),m--),m);e++);n&&q(c,[n],a,!0);!r&&p(f)&&(f.call(c,c,b,a),k.push([c,f]),l++)}})(this);

Class(function(){function l(){var a=s.call(arguments).join(" ");Kanji.notify("log.error",a);console.log("ERROR:",a)}function t(a){a=a&&a.replace(/'/g,'"');try{a=a&&B(a)}catch(c){}return a}function m(a){var c=a.data(p),b=a.data(q),d=h.instanceRefs,e,g;if(c)if(e=h[c]){g=e.componentType;c=t(a.attr(u));switch(g){case "shared":if(!(b=d[b]))a:{var b=h.instanceRefs,k;for(k in b)if(g=b[k],g instanceof e){b={instanceId:k,instance:g};break a}b={instanceId:v++,instance:new e}}e=b;b=e.instanceId;e=d[b]=e.instance;
break;default:b=b||v++,e=d[b]||new e,d[b]=e}e.init(a,c);a.attr(w,b)}else l("Component does not exist [",c,"]");else l("component is not declared on [",a,"]");return d[b]}function x(){var a=h.instanceRefs,c=+new Date,b,d;for(b in a)if(d=f(["[",w,"=",b,"]"].join("")),d.length||delete a[b],+new Date-c>C)break;y(x,z)}var D=window.Touch?"touchend":"click",u="data-cfg",p="com",q="instance",w="data-"+q,z=2E3,C=250,h={instanceRefs:{}},v=1,E=jsface.isFunction,f=jQuery,y=setTimeout,s=[].slice,A=0,r=[],B="object"===
typeof JSON&&JSON.parse||f.parseJSON;return{$statics:{initComponent:m,initAllLazy:function(){f("[data-com]").each(function(){var a=f(this);!1===a.data("lazy")&&m(a)})},notify:function(){var a=s.call(arguments),c=a.shift(),b=h.instanceRefs,d,e,g,k;for(d in b)for(k in e=b[d],g=e.listeners,g)if(k===c){g[k].apply(e,a);break}}},init:function(a,c){},listeners:0,$ready:function(a,c,b){this!==a&&((c=b.componentId)?h[c]||(h[c]=a,c=['[data-com="',c,'"][data-lazy="false"]'].join(""),A?f(c).each(function(){m(f(this))}):
r.push(c),b.componentType&&(a.componentType=b.componentType)):l("componentId must exist in api",b))},main:function(a){Kanji=a;f.fn.ready(function(){var a=f(document),b=r.length,d=0,e;for(A=1;d<b;)e=f(r[d++]),e.length&&e.each(function(){m(f(this))});a.on(D,"button,[role~=button]",function(){var a=f(this),b=a.closest("[data-com]"),e=b.data(q),c=a.data("act"),d=h.instanceRefs[e],n;n=(c=c&&["on",c.charAt(0).toUpperCase(),c.slice(1)].join(""))&&d&&d[c];if(!e||!d){d=m(b);if(!d)return;n=d&&c&&d[c]}c&&n?
E(n)?n.call(d,a,b,t(a.attr(u))):l("action [",c,"] found in component [",b.data(p),"] is not a function"):l("action [",c,"] not found in component [",b.data(p),"]")});a.on("keydown","input,textarea",function(a){});y(x,z)})}}});